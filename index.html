<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controllo Blynk con API REST</title>
</head>
<body>
    <h1>Controlla il tuo dispositivo Blynk</h1>

    <label for="pinValue">Valore da inviare al pin V1:</label>
    <input type="number" id="pinValue" placeholder="Inserisci valore">
    <button onclick="sendDataToBlynk()">Invia</button>

    <p id="response"></p>

    <script>
        function sendDataToBlynk() {
            // Ottieni il valore dall'input
            const value = document.getElementById('pinValue').value;
            const token = 'grYpUsFvzBxM6U0F_N1HM-_sub0_Ffhu';  // Sostituisci con il tuo token
            const pin = 'V1';  // Pin virtuale a cui inviare il dato

            if (value === '') {
                document.getElementById('response').innerText = "Per favore, inserisci un valore!";
                return;
            }

            // Costruisci l'URL per la richiesta API
            const url = `https://blynk.cloud/external/api/update/${pin}?value=${value}&token=${token}`;

            // Invia la richiesta con Fetch API
            fetch(url)
                .then(response => {
                    if (response.ok) {
                        return response.text();
                    } else {
                        throw new Error('Errore nella richiesta');
                    }
                })
                .then(data => {
                    document.getElementById('response').innerText = "Valore inviato con successo!";
                })
                .catch(error => {
                    document.getElementById('response').innerText = `Errore: ${error.message}`;
                });
        }
    </script>
</body>
</html>

