<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controlla LED da Blynk</title>
</head>
<body>
    <h1>Controlla il tuo LED con Blynk</h1>

    <!-- Switch virtuale per accendere/spegnere il LED -->
    <label for="virtualSwitch">LED (Controllo tramite Blynk):</label>
    <input type="checkbox" id="virtualSwitch" onchange="sendDataToBlynk(this.checked)">
    <p id="response"></p>

    <script>
        // Token di autenticazione Blynk
        const BLYNK_AUTH_TOKEN = "grYpUsFvzBxM6U0F_N1HM-_sub0_Ffhu";  // Sostituisci con il tuo token
        const pin = 'V1';  // Pin virtuale per il controllo del LED (assumiamo V1)

        // Funzione per inviare i dati a Blynk (Accendere/Spegnere il LED)
        function sendDataToBlynk(checked) {
            const value = checked ? 255 : 0;  // Se checked Ã¨ vero, accende il LED (255), altrimenti lo spegne (0)
            
            // Costruisci l'URL per inviare i dati
            const url = `https://blynk.cloud/external/api/update/${pin}?value=${value}&token=${BLYNK_AUTH_TOKEN}`;

            // Esegui la richiesta fetch per inviare i dati
            fetch(url)
                .then(response => response.ok ? response.text() : Promise.reject('Errore nella richiesta'))
                .then(data => {
                    document.getElementById('response').innerText = "Comando inviato con successo!";
                })
                .catch(error => {
                    document.getElementById('response').innerText = `Errore: ${error}`;
                });
        }
    </script>
</body>
</html>
